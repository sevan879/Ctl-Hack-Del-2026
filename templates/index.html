{% extends "base.html" %}

{% block title %}EyeQ - AI-Powered Eye-Tracking Quizlet{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
{% endblock %}

{% block body_content %}
  <div id="gaze-dot"></div>

  <button id="recalibrate-btn" class="recalibrate-btn">
    ğŸ¯
    <div class="dwell-bar"><div class="dwell-fill"></div></div>
  </button>

  <div id="start-screen" class="screen active">
    <h1>ğŸ‘ï¸ EyeQ</h1>
    <p>AI-Powered Eye-Tracking Quizlet</p>
    <input type="text" id="topic-input" placeholder="Enter a topic (e.g. Python, Biology)">
    <select id="difficulty-select">
      <option value="easy">Easy</option>
      <option value="medium" selected>Medium</option>
      <option value="hard">Hard</option>
    </select>
    <button id="start-btn">Generate Quiz</button>
    <p id="loading" style="display:none;">â³ AI is generating your quiz...</p>
  </div>

  <div id="quiz-screen" class="screen">
    <div id="quiz-header">
      <span id="q-counter">Question 1/3</span>
      <span id="score">Score: 0</span>
      <span id="timer">â± 0s</span>
    </div>

    <div id="question-text"></div>

    <div id="options-container">
      <div class="option" data-index="0">
        <div class="option-letter">A</div>
        <div class="option-text"></div>
        <div class="dwell-bar"><div class="dwell-fill"></div></div>
      </div>
      <div class="option" data-index="1">
        <div class="option-letter">B</div>
        <div class="option-text"></div>
        <div class="dwell-bar"><div class="dwell-fill"></div></div>
      </div>
      <div class="option" data-index="2">
        <div class="option-letter">C</div>
        <div class="option-text"></div>
        <div class="dwell-bar"><div class="dwell-fill"></div></div>
      </div>
      <div class="option" data-index="3">
        <div class="option-letter">D</div>
        <div class="option-text"></div>
        <div class="dwell-bar"><div class="dwell-fill"></div></div>
      </div>
    </div>

    <div id="feedback" style="display:none;">
      <div id="feedback-text"></div>
      <div id="explanation"></div>
      <button id="next-btn">Next Question â†’</button>
    </div>
  </div>

  <div id="results-screen" class="screen">
    <h2>Quiz Complete!</h2>
    <div id="final-score"></div>
    <div id="results-details"></div>
    <button id="restart-btn">Try Another Topic</button>
  </div>
{% endblock %}

{% block base_scripts %}
  <script src="https://cdn.jsdelivr.net/npm/webgazer@2.1.0/dist/webgazer.min.js"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
{% endblock %}